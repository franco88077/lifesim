{% extends "layouts/base.html" %}

{% block extra_css %}
  <link rel="stylesheet" href="{{ url_for('banking.static', filename='styles/banking.css') }}" />
{% endblock %}

{% block content %}
  <div class="banking-shell">
    <section class="banking-subnav" aria-label="Banking navigation">
      <nav class="banking-tabs">
        <a
          href="{{ url_for('banking.home') }}"
          class="banking-tab{% if active_banking_tab == 'home' %} is-active{% endif %}"
          {% if active_banking_tab == 'home' %}aria-current="page"{% endif %}
        >
          Banking Home
        </a>
        <a
          href="{{ url_for('banking.insights') }}"
          class="banking-tab{% if active_banking_tab == 'insights' %} is-active{% endif %}"
          {% if active_banking_tab == 'insights' %}aria-current="page"{% endif %}
        >
          Account Insights
        </a>
        <a
          href="{{ url_for('banking.transfer') }}"
          class="banking-tab{% if active_banking_tab == 'transfer' %} is-active{% endif %}"
          {% if active_banking_tab == 'transfer' %}aria-current="page"{% endif %}
        >
          Banking Transfer
        </a>
        <a
          href="{{ url_for('banking.settings') }}"
          class="banking-tab{% if active_banking_tab == 'settings' %} is-active{% endif %}"
          {% if active_banking_tab == 'settings' %}aria-current="page"{% endif %}
        >
          Banking Settings
        </a>
      </nav>
    </section>

    <section class="banking-overview" aria-label="Banking transactions">
      <header class="banking-overview__header">
        <h1>Lifesim — Banking Transactions</h1>
        <p>
          Review every recorded credit and debit for {{ bank_settings.bank_name }}. Cash movements remain manual so the ledger
          focuses on checking and savings accuracy.
        </p>
      </header>
      <div class="account-activity__transactions" aria-label="Transaction ledger">
        <h3>Transaction history</h3>
        <p class="account-activity__description">
          Showing
          {% if pagination.total %}
            {{ display_start }}–{{ display_end }} of {{ pagination.total }}
          {% else %}
            0
          {% endif %}
          transactions ordered from newest to oldest.
        </p>
        {% if transactions %}
          <ul class="transaction-list transaction-list--full">
            {% for transaction in transactions %}
              <li class="transaction-list__item" data-direction="{{ transaction.direction }}">
                <div class="transaction-list__row">
                  <span class="transaction-list__name">{{ transaction.name }}</span>
                  <span class="transaction-list__amount">{{ transaction.amount_display }}</span>
                </div>
                <p class="transaction-list__meta">{{ transaction.account_name }} · {{ transaction.timestamp }}</p>
                <p class="transaction-list__description">{{ transaction.description }}</p>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <p class="transaction-list__empty">No ledger entries yet. Submit transfers to populate the history.</p>
        {% endif %}
        <nav class="pagination" aria-label="Ledger pagination">
          <ul>
            <li>
              {% if pagination.has_prev %}
                <a href="{{ url_for('banking.transactions', page=pagination.prev_page, per_page=pagination.per_page) }}">Previous</a>
              {% else %}
                <span aria-disabled="true">Previous</span>
              {% endif %}
            </li>
            <li class="pagination__info">Page {{ pagination.page }} of {{ pagination.pages }}</li>
            <li>
              {% if pagination.has_next %}
                <a href="{{ url_for('banking.transactions', page=pagination.next_page, per_page=pagination.per_page) }}">Next</a>
              {% else %}
                <span aria-disabled="true">Next</span>
              {% endif %}
            </li>
          </ul>
        </nav>
      </div>
    </section>
  </div>
{% endblock %}
